# 36. Длина кратчайшего пути

<table>
  <tr>
    <td></td>
    <td>Все языки</td>
    <td>Python 3.6</td>
  </tr>
  <tr>
    <td>Ограничение времени</td>
    <td>1 секунда</td>
    <td>5 секунда</td>
  </tr>
  <tr>
    <td>Ограничение памяти</td>
    <td>64Mb</td>
    <td>256Mb</td>
  </tr>
  <tr>
    <td>Ввод</td>
    <td colspan="2">стандартный ввод или input.txt</td>
  </tr>
  <tr>
    <td>Вывод</td>
    <td colspan="2">стандартный вывод или output.txt</td>
  </tr>
</table>

В неориентированном графе требуется найти длину минимального пути между двумя вершинами.

## Формат ввода

Первым на вход поступает число N – количество вершин в графе (1 ≤ N ≤ 100). Затем записана матрица смежности (0 обозначает отсутствие ребра, 1 – наличие ребра). Далее задаются номера двух вершин – начальной и конечной.

## Формат вывода

Выведите L – длину кратчайшего пути (количество ребер, которые нужно пройти).

Если пути нет, нужно вывести -1.

### Пример 1

#### Ввод

```
10
0 1 0 0 0 0 0 0 0 0
1 0 0 1 1 0 1 0 0 0
0 0 0 0 1 0 0 0 1 0
0 1 0 0 0 0 1 0 0 0
0 1 1 0 0 0 0 0 0 1
0 0 0 0 0 0 1 0 0 1
0 1 0 1 0 1 0 0 0 0
0 0 0 0 0 0 0 0 1 0
0 0 1 0 0 0 0 1 0 0
0 0 0 0 1 1 0 0 0 0
5 4
```

#### Вывод

```
2
```

### Пример 2

#### Ввод

```
5
0 1 0 0 1
1 0 1 0 0
0 1 0 0 0
0 0 0 0 0
1 0 0 0 0
3 5
```

#### Вывод

```
3
```

-------------

# 37. Путь в графе

<table>
  <tr>
    <td>Ограничение времени</td>
    <td>1 секунда</td>
  </tr>
  <tr>
    <td>Ограничение памяти</td>
    <td>64Mb</td>
  </tr>
  <tr>
    <td>Ввод</td>
    <td>стандартный ввод или input.txt</td>
  </tr>
  <tr>
    <td>Вывод</td>
    <td>стандартный вывод или output.txt</td>
  </tr>
</table>

В неориентированном графе требуется найти минимальный путь между двумя вершинами.

## Формат ввода

Первым на вход поступает число N – количество вершин в графе (1 ≤ N ≤ 100). Затем записана матрица смежности (0 обозначает отсутствие ребра, 1 – наличие ребра). Далее задаются номера двух вершин – начальной и конечной.

## Формат вывода

Выведите сначала L – длину кратчайшего пути (количество ребер, которые нужно пройти), а потом сам путь. Если путь имеет длину 0, то его выводить не нужно, достаточно вывести длину.

Необходимо вывести путь (номера всех вершин в правильном порядке). Если пути нет, нужно вывести -1.

### Пример 1

#### Ввод

```
10
0 1 0 0 0 0 0 0 0 0
1 0 0 1 1 0 1 0 0 0
0 0 0 0 1 0 0 0 1 0
0 1 0 0 0 0 1 0 0 0
0 1 1 0 0 0 0 0 0 1
0 0 0 0 0 0 1 0 0 1
0 1 0 1 0 1 0 0 0 0
0 0 0 0 0 0 0 0 1 0
0 0 1 0 0 0 0 1 0 0
0 0 0 0 1 1 0 0 0 0
5 4
```

#### Вывод

```
2
5 2 4
```

-------------

# 38. Блохи

<table>
  <tr>
    <td>Ограничение времени</td>
    <td>1 секунда</td>
  </tr>
  <tr>
    <td>Ограничение памяти</td>
    <td>64Mb</td>
  </tr>
  <tr>
    <td>Ввод</td>
    <td>стандартный ввод или input.txt</td>
  </tr>
  <tr>
    <td>Вывод</td>
    <td>стандартный вывод или output.txt</td>
  </tr>
</table>

На клеточном поле, размером NxM (2 ≤ N, M ≤ 250) сидит Q (0 ≤ Q ≤ 10000) блох в различных клетках. "Прием пищи" блохами возможен только в кормушке - одна из клеток поля, заранее известная. Блохи перемещаются по полю странным образом, а именно, прыжками, совпадающими с ходом обыкновенного шахматного коня. Длина пути каждой блохи до кормушки определяется как количество прыжков. Определить минимальное значение суммы длин путей блох до кормушки или, если собраться блохам у кормушки невозможно, то сообщить об этом. Сбор невозможен, если хотя бы одна из блох не может попасть к кормушке.

## Формат ввода

В первой строке входного файла находится 5 чисел, разделенных пробелом: `N`, `M`, `S`, `T`, `Q`. `N, M` - размеры доски (отсчет начинается с 1); `S, T` - координаты клетки - кормушки (номер строки и столбца соответственно), `Q` - количество блох на доске. И далее Q строк по два числа - координаты каждой блохи.

## Формат вывода

Содержит одно число - минимальное значение суммы длин путей или -1, если сбор невозможен.

### Пример 1

#### Ввод

```
2 2 1 1 1
2 2
```

#### Вывод

```
-1
```

### Пример 2

#### Ввод

```
4 4 1 1 16
1 1
1 2
1 3
1 4
2 1
2 2
2 3
2 4
3 1
3 2
3 3
3 4
4 1
4 2
4 3
4 4
```

#### Вывод

```
42
```

-------------

# 39. Путь спелеолога

<table>
  <tr>
    <td>Ограничение времени</td>
    <td>1 секунда</td>
  </tr>
  <tr>
    <td>Ограничение памяти</td>
    <td>64Mb</td>
  </tr>
  <tr>
    <td>Ввод</td>
    <td>стандартный ввод или input.txt</td>
  </tr>
  <tr>
    <td>Вывод</td>
    <td>стандартный вывод или output.txt</td>
  </tr>
</table>

Пещера представлена кубом, разбитым на N частей по каждому измерению (то есть на N<sup>3</sup> кубических клеток). Каждая клетка может быть или пустой, или полностью заполненной камнем. Исходя из положения спелеолога в пещере, требуется найти, какое минимальное количество перемещений по клеткам ему требуется, чтобы выбраться на поверхность. Переходить из клетки в клетку можно, только если они обе свободны и имеют общую грань.

## Формат ввода

В первой строке содержится число N (1 ≤ N ≤ 30). Далее следует N блоков. Блок состоит из пустой строки и N строк по N символов: `#` - обозначает клетку, заполненную камнями, точка - свободную клетку. Начальное положение спелеолога обозначено заглавной буквой `S`. Первый блок представляет верхний уровень пещеры, достижение любой свободной его клетки означает выход на поверхность. Выход на поверхность всегда возможен.

## Формат вывода

Вывести одно число - длину пути до поверхности.

### Пример 1

#### Ввод

```
3

###
###
.##

.#.
.#S
.#.

###
...
###
```

#### Вывод

```
6
```

## Примечания

Нужно спуститься на уровень вниз, сделать два движения на запад, подняться на уровень вверх, сделать движение на юг, подняться на уровень вверх.

-------------

# 40. Метро

<table>
  <tr>
    <td>Ограничение времени</td>
    <td>1 секунда</td>
  </tr>
  <tr>
    <td>Ограничение памяти</td>
    <td>64Mb</td>
  </tr>
  <tr>
    <td>Ввод</td>
    <td>стандартный ввод или input.txt</td>
  </tr>
  <tr>
    <td>Вывод</td>
    <td>стандартный вывод или output.txt</td>
  </tr>
</table>

Метрополитен состоит из нескольких линий метро. Все станции метро в городе пронумерованы натуральными числами от 1 до N. На каждой линии расположено несколько станций. Если одна и та же станция расположена сразу на нескольких линиях, то она является станцией пересадки и на этой станции можно пересесть с любой линии, которая через нее проходит, на любую другую (опять же проходящую через нее).

Напишите программу, которая по данному вам описанию метрополитена определит, с каким минимальным числом пересадок можно добраться со станции A на станцию B. Если данный метрополитен не соединяет все линии в одну систему, то может так получиться, что со станции A на станцию B добраться невозможно, в этом случае ваша программа должна это определить.

## Формат ввода

Сначала вводится число N — количество станций метро в городе (2≤N≤100). Далее следует число M — количество линий метро (1≤M≤20). Далее идет описание M линий. Описание каждой линии состоит из числа P<sub>i</sub> — количество станций на этой линии (2≤P<sub>i</sub>≤50) и P<sub>i</sub> чисел, задающих номера станций, через которые проходит линия (ни через какую станцию линия не проходит дважды).

Затем вводятся два различных числа: A — номер начальной станции, и B — номер станции, на которую нам нужно попасть. При этом если через станцию A проходит несколько линий, то мы можем спуститься на любую из них. Так же если через станцию B проходит несколько линий, то нам не важно, по какой линии мы приедем.

## Формат вывода

Выведите минимальное количество пересадок, которое нам понадобится. Если добраться со станции A на станцию B невозможно, программа должна вывести одно число –1 (минус один).

### Пример 1

#### Ввод

```
5
2
4 1 2 3 4
2 5 3
3 1
```

#### Вывод

```
0
```

-------------