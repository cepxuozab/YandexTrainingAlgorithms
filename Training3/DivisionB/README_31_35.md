# 31. Поиск в глубину

<table>
  <tr>
    <td></td>
    <td>Все языки</td>
    <td>Python 3.6</td>
  </tr>
  <tr>
    <td>Ограничение времени</td>
    <td>2 секунда</td>
    <td>5 секунда</td>
  </tr>
  <tr>
    <td>Ограничение памяти</td>
    <td>256Mb</td>
    <td>256Mb</td>
  </tr>
  <tr>
    <td>Ввод</td>
    <td colspan="2">стандартный ввод или input.txt</td>
  </tr>
  <tr>
    <td>Вывод</td>
    <td colspan="2">стандартный вывод или output.txt</td>
  </tr>
</table>

Дан неориентированный граф, возможно, с петлями и кратными ребрами. Необходимо построить компоненту связности,
содержащую первую вершину.

## Формат ввода

В первой строке записаны два целых числа N (1 ≤ N ≤ 10<sup>3</sup>) и M (0 ≤ M ≤ 5 * 10<sup>5</sup>) — количество вершин
и ребер в графе. В последующих M строках перечислены ребра — пары чисел, определяющие номера вершин, которые соединяют
ребра.

## Формат вывода

В первую строку выходного файла выведите число K — количество вершин в компоненте связности. Во вторую строку выведите K
целых чисел — вершины компоненты связности, перечисленные в порядке возрастания номеров.

### Пример 1

#### Ввод

```
4 5
2 2
3 4
2 3
1 3
2 4
```

#### Вывод

```
4
1 2 3 4
```

-------------

# 32. Компоненты связности

<table>
  <tr>
    <td></td>
    <td>Все языки</td>
    <td>Python 3.6</td>
  </tr>
  <tr>
    <td>Ограничение времени</td>
    <td>2 секунда</td>
    <td>5 секунда</td>
  </tr>
  <tr>
    <td>Ограничение памяти</td>
    <td>256Mb</td>
    <td>256Mb</td>
  </tr>
  <tr>
    <td>Ввод</td>
    <td colspan="2">стандартный ввод или input.txt</td>
  </tr>
  <tr>
    <td>Вывод</td>
    <td colspan="2">стандартный вывод или output.txt</td>
  </tr>
</table>

Дан неориентированный невзвешенный граф. Необходимо посчитать количество его компонент связности и вывести их.

## Формат ввода

Во входном файле записано два числа N и M (0 < N ≤ 100000, 0 ≤ M ≤ 100000). В следующих M строках записаны по два числа
i и j (1 ≤ i, j ≤ N), которые означают, что вершины i и j соединены ребром.

## Формат вывода

В первой строчке выходного файла выведите количество компонент связности. Далее выведите сами компоненты связности в
следующем формате: в первой строке количество вершин в компоненте, во второй - сами вершины в произвольном порядке.

### Пример 1

#### Ввод

```
6 4
3 1
1 2
5 4
2 3
```

#### Вывод

```
3
3
1 2 3 
2
4 5 
1
6
```

### Пример 2

#### Ввод

```
6 4
4 2
1 4
6 4
3 6
```

#### Вывод

```
2
5
1 2 3 4 6 
1
5 
```

-------------

# 33. Списывание

<table>
  <tr>
    <td></td>
    <td>Все языки</td>
    <td>Python 3.6</td>
  </tr>
  <tr>
    <td>Ограничение времени</td>
    <td>2 секунда</td>
    <td>5 секунда</td>
  </tr>
  <tr>
    <td>Ограничение памяти</td>
    <td>256Mb</td>
    <td>256Mb</td>
  </tr>
  <tr>
    <td>Ввод</td>
    <td colspan="2">стандартный ввод или input.txt</td>
  </tr>
  <tr>
    <td>Вывод</td>
    <td colspan="2">стандартный вывод или output.txt</td>
  </tr>
</table>

Во время контрольной работы профессор Флойд заметил, что некоторые студенты обмениваются записками. Сначала он хотел
поставить им всем двойки, но в тот день профессор был добрым, а потому решил разделить студентов на две группы:
списывающих и дающих списывать, и поставить двойки только первым.

У профессора записаны все пары студентов, обменявшихся записками. Требуется определить, сможет ли он разделить студентов
на две группы так, чтобы любой обмен записками осуществлялся от студента одной группы студенту другой группы.

## Формат ввода

В первой строке находятся два числа N и M — количество студентов и количество пар студентов, обменивающихся записками (
1 ≤ N ≤ 10<sup>2</sup>, 0 ≤ M ≤ N(N−1)/2).

Далее в M строках расположены описания пар студентов: два числа, соответствующие номерам студентов, обменивающихся
записками (нумерация студентов идёт с 1). Каждая пара студентов перечислена не более одного раза.

## Формат вывода

Необходимо вывести ответ на задачу профессора Флойда. Если возможно разделить студентов на две группы - выведите YES;
иначе выведите NO.

### Пример 1

#### Ввод

```
3 2
1 2
2 3
```

#### Вывод

```
YES
```

### Пример 2

#### Ввод

```
3 3
1 2
2 3
1 3
```

#### Вывод

```
NO
```

-------------

# 34. Топологическая сортировка

<table>
  <tr>
    <td>Ограничение времени</td>
    <td>2 секунда</td>
  </tr>
  <tr>
    <td>Ограничение памяти</td>
    <td>256Mb</td>
  </tr>
  <tr>
    <td>Ввод</td>
    <td>стандартный ввод или input.txt</td>
  </tr>
  <tr>
    <td>Вывод</td>
    <td>стандартный вывод или output.txt</td>
  </tr>
</table>

Дан ориентированный граф. Необходимо построить топологическую сортировку.

## Формат ввода

В первой строке входного файла два натуральных числа N и M (1 ≤ N, M ≤ 100 000) — количество вершин и рёбер в графе
соответственно. Далее в M строках перечислены рёбра графа. Каждое ребро задаётся парой чисел — номерами начальной и
конечной вершин соответственно.

## Формат вывода

Выведите любую топологическую сортировку графа в виде последовательности номеров вершин (перестановка чисел от 1 до N).
Если топологическую сортировку графа построить невозможно, выведите -1.

### Пример 1

#### Ввод

```
6 6
1 2
3 2
4 2
2 5
6 5
4 6
```

#### Вывод

```
4 6 3 1 2 5 
```

-------------

# 35. Поиск цикла

<table>
  <tr>
    <td></td>
    <td>Все языки</td>
    <td>Python 3.6</td>
  </tr>
  <tr>
    <td>Ограничение времени</td>
    <td>2 секунда</td>
    <td>5 секунда</td>
  </tr>
  <tr>
    <td>Ограничение памяти</td>
    <td>256Mb</td>
    <td>256Mb</td>
  </tr>
  <tr>
    <td>Ввод</td>
    <td colspan="2">стандартный ввод или input.txt</td>
  </tr>
  <tr>
    <td>Вывод</td>
    <td colspan="2">стандартный вывод или output.txt</td>
  </tr>
</table>

Дан неориентированный граф. Требуется определить, есть ли в нем цикл, и, если есть, вывести его.

## Формат ввода

В первой строке дано одно число n — количество вершин в графе ( 1 ≤ n ≤ 500 ). Далее в n строках задан сам граф матрицей
смежности.

## Формат вывода

Если в иcходном графе нет цикла, то выведите «NO». Иначе, в первой строке выведите «YES», во второй строке выведите
число k — количество вершин в цикле, а в третьей строке выведите k различных чисел — номера вершин, которые принадлежат
циклу в порядке обхода (обход можно начинать с любой вершины цикла). Если циклов несколько, то выведите любой.

### Пример 1

#### Ввод

```
3
0 1 1
1 0 1
1 1 0
```

#### Вывод

```
YES
3
3 2 1
```

### Пример 2

#### Ввод

```
4
0 0 1 0
0 0 0 1
1 0 0 0
0 1 0 0
```

#### Вывод

```
NO
```

### Пример 3

#### Ввод

```
5
0 1 0 0 0
1 0 0 0 0
0 0 0 1 1
0 0 1 0 1
0 0 1 1 0
```

#### Вывод

```
YES
3
5 4 3
```

-------------